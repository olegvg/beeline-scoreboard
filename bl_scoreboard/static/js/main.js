/**
 * Created by ogaidukov on 18.03.14.
 */


/* 'paths' are auto generated by 'bower install', see .bowerrc & bower.json at the root of the project */
requirejs.config({
  shim: {
    angular: {
      deps: [
        'jquery'
      ],
      exports: 'angular'
    },
    'angular-route': {
      deps: [
        'angular'
      ]
    },
    bootstrap: {
      deps: [
        'css!../css/main.css',
        'jquery'
      ]
    },
    'angular-bootstrap': {
      deps: [
        'angular',
        'bootstrap'
      ]
    },
    'angular-ui-select2': {
      deps: [
        'css!../lib/select2/select2.css',
        'less!../less/select2-bootstrap.less',
        'select2',
        'select2_locale_ru',
        'angular'
      ]
    },
    'jquery-maskedinput': {
      deps: [
        'jquery'
      ]
    }
  },
  paths: {
    angular: '../lib/angular/angular',
    'angular-bootstrap': '../lib/angular-bootstrap/ui-bootstrap-tpls',
    'angular-route': '../lib/angular-route/angular-route',
    'angular-ui-select2': '../lib/angular-ui-select2/src/select2',
    bootstrap: '../lib/bootstrap/dist/js/bootstrap',
    jquery: '../lib/jquery/jquery',
    css: '../lib/require-css/css',
    'css-builder': '../lib/require-css/css-builder',
    normalize: '../lib/require-css/normalize',
    requirejs: '../lib/requirejs/require',
    select2: '../lib/select2/select2',
    select2_locale_ru: '../lib/select2/select2_locale_ru',
    'jquery-maskedinput': '../lib/jquery-maskedinput/dist/jquery.maskedinput'
  },
  priority: [
    'angular'
  ],
  map: {
    '*': {
      less: '../lib/require-less/less'
    }
  },
  packages: [

  ]
});

require([
  'app',
  'routes',
  'angular',
  'angular-route',
  'angular-bootstrap',
  'angular-ui-select2',
  'jquery-maskedinput'
], function(app) {
  app.init();

//  // JS part of fix for iOS bug with
//  // See http://stackoverflow.com/questions/15199072/ios-input-focused-inside-fixed-parent-stops-position-update-of-fixed-elements
//  $(document).ready(function() {
//    // Install Modernizr first
//    if (Modernizr.touch) {
//      $(document)
//        .on('focus', 'input', function(e) {
//          $('body').addClass('fixfixed');
//        })
//        .on('blur', 'input', function(e) {
//          $('body').removeClass('fixfixed');
//        });
//      }
//  });
});
